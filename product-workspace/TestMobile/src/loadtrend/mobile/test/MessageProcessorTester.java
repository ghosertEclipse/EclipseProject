/*
 * Created on 2005-6-1
 *
 * TODO To change the template for this generated file go to
 * Window - Preferences - Java - Code Style - Code Templates
 */
package loadtrend.mobile.test;

import java.io.UnsupportedEncodingException;

import junit.framework.TestCase;
import loadtrend.mobile.Message;
import loadtrend.mobile.MessageProcessor;

/**
 * @author Zhang Jiawei
 *
 * TODO To change the template for this generated type comment go to
 * Window - Preferences - Java - Code Style - Code Templates
 */
public class MessageProcessorTester extends TestCase
{
//  port value example:
/**
//  +CMGL: 65,3,,146
//  0891683108200105F0318D0BA13119377498F30008FF8462A5544A62FF5230676500214EE5524D4E71641E516B641E002C641E51FA62974F5367656765002154C754C854C854C8002153EF4EE54E715543516B55434E867EE77EED002C4E0D8FC762974F535FEB75285B8C4E86002C8FD88981625376840021660E592995EE95EE56624F604EEC80FD62534F100021665A5B89002C554355430021
//  +CMGL: 66,1,,103
//  0891683108200105F0240BA13119377498F300085030121293602054554A003F002154C854C854C854C854C820264E0D8FC7641E4E0D61C24EC04E4853EB75285B8C4E86554A003F90A3660E5929518D8BF4002C4E0D56DE002C5F0059CB593475BC4E86002C6B63597D776189C9000A
*/
// pdu example:
// read
// 08 91683108200105F0 24    0B A1 3119377498F3 00 08 40402032302320 80 660E59294E0A5348626B589353BB002C4E2D534856DE67655403996D002E4E4B540E75314F605B896392002160C57EEA4F4E843D662F621176849519002C4E0B6B214E0D65625566003B002D0029518D770B4E0096C65C319A6C4E0A776100217BA1597D4F6081EA5DF15C31597D5566002162114E0D53D15566002172317684
// sent
// 08 91683108200105F0 31 8D 0B A1 3119377498F3 00 08 FF 84 62A5544A62FF5230676500214EE5524D4E71641E516B641E002C641E51FA62974F5367656765002154C754C854C854C8002153EF4EE54E715543516B55434E867EE77EED002C4E0D8FC762974F535FEB75285B8C4E86002C8FD88981625376840021660E592995EE95EE56624F604EEC80FD62534F100021665A5B89002C554355430021
// unsent
// 08 91683108200105F0 11 00 00 80              00 08 FF 08 62C94E0199996E2F
// special - read
// 08 91683108200105F0 06 2D 0B A1 3165048115F4 40107102803220 40107102803220 00 FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
// 7bit - sent
// 08 91683108200105F0 31 00 0D 91 683119969348F7 00 10 A7 06 C8329BFD0E01
    
// long message example:
/**
   sent
   08 91683108200105F0 71 AE 0B A0 3119969348F7 00 08 FF 66 0500031B0202 0031003765F64E3E884C7ED35A5A5178793C30025E2D8BBE003A4E1C65B98DEF003200300030003053F7002C4E1C89C682B182D100284E1C65B9753589C653F051850029002C5C4A65F6656C8BF753C252A062114EEC76845A5A793C3002000A
   08 91683108200105F0 71 AD 0B A0 3119969348F7 00 08 FF 8C 0500031B0201 88AB6211902E52308FD84E0D776189C90021545C545C545C002C621160F38D775E8A4E86002C621173B05728663C591C98A050125566002183497A3F6CA153D18FC7002C4F6065396539518D53D17ED9621167007EC87248672C5427003A00207D276025901A77E520266211548C8001516C4F734F1F5B9A4E8E003567080032003165E5002C
*/
    
    public static void main( String[] args )
    {
        junit.textui.TestRunner.run( MessageProcessorTester.class );
    }

    /*
     * @see TestCase#setUp()
     */
    protected void setUp() throws Exception
    {
    }

    /*
     * @see TestCase#tearDown()
     */
    protected void tearDown() throws Exception
    {
    }
    
    public void testPDUDecoder() throws UnsupportedEncodingException
    {
        Message message = new Message();
        message.setIndex( 1 );
        message.setStatus( Message.READ_STATUS );

        String[] pdus = new String[]
        {
        // read
        "0891683108200105F0240BA13119377498F300084040203230232080660E59294E0A5348626B589353BB002C4E2D534856DE67655403996D002E4E4B540E75314F605B896392002160C57EEA4F4E843D662F621176849519002C4E0B6B214E0D65625566003B002D0029518D770B4E0096C65C319A6C4E0A776100217BA1597D4F6081EA5DF15C31597D5566002162114E0D53D15566002172317684",
        // sent
        "0891683108200105F0318D0BA13119377498F30008FF8462A5544A62FF5230676500214EE5524D4E71641E516B641E002C641E51FA62974F5367656765002154C754C854C854C8002153EF4EE54E715543516B55434E867EE77EED002C4E0D8FC762974F535FEB75285B8C4E86002C8FD88981625376840021660E592995EE95EE56624F604EEC80FD62534F100021665A5B89002C554355430021",
        // unsent
        "0891683108200105F0110000800008FF0862C94E0199996E2F",
        // special
        "0891683108200105F0062D0BA13165048115F4401071028032204010710280322000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",
        // 7bit
        "0891683108200105F031000D91683119969348F70010A706C8329BFD0E01",
        // long message
        "0891683108200105F071AE0BA03119969348F70008FF660500031B02020031003765F64E3E884C7ED35A5A5178793C30025E2D8BBE003A4E1C65B98DEF003200300030003053F7002C4E1C89C682B182D100284E1C65B9753589C653F051850029002C5C4A65F6656C8BF753C252A062114EEC76845A5A793C3002000A",
        "0891683108200105F071AD0BA03119969348F70008FF8C0500031B020188AB6211902E52308FD84E0D776189C90021545C545C545C002C621160F38D775E8A4E86002C621173B05728663C591C98A050125566002183497A3F6CA153D18FC7002C4F6065396539518D53D17ED9621167007EC87248672C5427003A00207D276025901A77E520266211548C8001516C4F734F1F5B9A4E8E003567080032003165E5002C",
        };
        
        for ( int i = 0; i < pdus.length; i++ )
        {
            message = MessageProcessor.gsmDecodePdu( pdus[i] );

            System.out.println( "<-----------------PDU Decoding-------------------------->" );
            // sent
            System.out.println( "DeliveryValidTime: " + message.getDeliveryValidTime() );
            // read
            System.out.println( "CenterNum: " + message.getMessageCenterNum() );
            System.out.println( "TeleNum: " + message.getTeleNum() );
            System.out.println( "ReceiveTime: " + message.getReceiveTime() );
            System.out.println( "ReserveSign: " + message.getReserveSign() );
            System.out.println( "Content: " + message.getContent() );

            System.out.println( pdus[i] );

            testPDUEncoder( message );
        }
    }
    
    public void testPDUEncoder( Message message )  throws UnsupportedEncodingException
    {
        String pdus = MessageProcessor.gsmEncodePdu( message );
        System.out.println( "<----------------PDU Encoding-------------------------------------->" );
        System.out.println( pdus );
    }    
    

}
